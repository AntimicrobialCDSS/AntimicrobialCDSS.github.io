<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read XML</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .field {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
        }
        .field h3 {
            margin: 0;
            padding-bottom: 10px;
        }
        .field p {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div id="content"></div>
    <script>
        async function fetchAndParseXML(fileName) {
            try {
                const response = await fetch(fileName);
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                const xmlText = await response.text();
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlText, "text/xml");

                const contentDiv = document.getElementById('content');

                const template = xmlDoc.querySelector("TEMPLATE");
                const templateName = template.getAttribute("NAME");
                const templateType = template.querySelector("TYPE").textContent;
                const templateStatus = template.querySelector("STATUS").textContent;
                const boilerplateTexts = Array.from(template.querySelectorAll("BOILERPLATE_TEXT p")).map(p => p.textContent);

                // Display template information
                const templateInfo = document.createElement('div');
                templateInfo.innerHTML = `<h2>Template Information</h2>
                                          <p><strong>Name:</strong> ${templateName}</p>
                                          <p><strong>Type:</strong> ${templateType}</p>
                                          <p><strong>Status:</strong> ${templateStatus}</p>
                                          <h3>Boilerplate Texts:</h3>
                                          <p>${boilerplateTexts.join('<br>')}</p>`;
                contentDiv.appendChild(templateInfo);

                // Display fields information
                const fields = Array.from(xmlDoc.querySelectorAll("TEMPLATE_FIELDS FIELD")).map(field => {
                    const name = field.getAttribute("NAME");
                    const type = field.querySelector("TYPE").textContent;
                    const url = field.querySelector("URL") ? field.querySelector("URL").textContent : "N/A";
                    const items = field.querySelector("ITEMS") ? Array.from(field.querySelectorAll("ITEMS p")).map(p => p.textContent) : ["N/A"];
                    return { name, type, url, items };
                });

                fields.forEach(field => {
                    const fieldDiv = document.createElement('div');
                    fieldDiv.classList.add('field');
                    fieldDiv.innerHTML = `<h3>Field: ${field.name}</h3>
                                          <p><strong>Type:</strong> ${field.type}</p>
                                          <p><strong>URL:</strong> ${field.url}</p>
                                          <p><strong>Items:</strong> ${field.items.join('<br>')}</p>`;
                    contentDiv.appendChild(fieldDiv);
                });
            } catch (error) {
                console.error("Error fetching or parsing the XML file:", error);
            }
        }

        // Call the function with the name of your .txml file
        fetchAndParseXML('Minneapolis.txml');
    </script>
</body>
</html>
